# Maintainer: Bernardo Ferrari <bernardo.mferrari@gmail.com>

pkgname=libhello
pkgver=0.1.0
pkgrel=1
pkgdesc="Simple hello library with a void hello(std::string) function."
arch=('x86_64')
url="https://github.com/tarberd/cmake-project-template"
license=('GPL')
depends=('glibc' 'gcc-libs')
makedepends=('cmake>=3.11.0')
checkdepends=('catch2')
source=("$pkgname-$pkgver.tar.gz::https://github.com/tarberd/cmake-project-template/archive/v$pkgver.tar.gz")
md5sums=('7011322a7d32f0eefe7df238bde63791')

build() {
	cd "cmake-project-template-$pkgver/$pkgname"
  cmake \
    -DBUILD_TESTS=false \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DBUILD_SHARED_LIBS=on \
    -DCMAKE_BUILD_TYPE=Release \
    .
	make -j
}

check() {
	cd "cmake-project-template-$pkgver/$pkgname"
  cmake \
    -DBUILD_TESTS=true \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DBUILD_SHARED_LIBS=on \
    -DCMAKE_BUILD_TYPE=Release \
    .
  make
	make test
}

package() {
	cd "cmake-project-template-$pkgver/$pkgname"
	make DESTDIR="$pkgdir/" install
}
